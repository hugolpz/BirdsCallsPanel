<!doctype html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if IE 9]>    <html class="no-js lt-ie10" lang="en"> <![endif]-->
<!--[if gt IE 9]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">


    <title>BirdCalls of India</title>

    <!--Stylesheets-->
    <link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="css/main.css">
    <!--Fonts-->
    <link href='https://fonts.googleapis.com/css?family=PT+Sans' rel='stylesheet' type='text/css'>
    <!--Javascripts-->
    <script src="js/modernizr-2.6.2.min.js"></script>
    <script src="js/jquery-2.1.0.min.js"></script>
    <script src="js/handlebars.min.js"></script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/tabletop.js/1.1.0/tabletop.min.js"></script>
    <script rel='script' src='js/howler.js'></script>
    <!--[if lt IE 9]>
        <script src="https://ie7-js.googlecode.com/svn/version/2.1(beta4)/IE9.js"></script>
        <script>window.jQuery || document.write('<script src="js/IE9.js"><\/script>')</script>
    <![endif]-->
</head>
    <script>  // Mid-storey_or_capony ; Ground_dwelling_or_understorey
    var url='data.json'; // relative url : 'data.json'; protocole-relative absolute url: '//website.org/path/to/data.json';
    var jsonData = {"item": [
    {"latin":"Glaucidium cuculoides","english":"Asian barred owlet","img":"Asian_barred_owlet.jpg","mp3":"Asian_barred_owlet.mp3","key":1,"ecosystem":"tree","iucn":"LC"},
	{"latin":"Eurystomus orientalis","english":"Asian dollarbird","img":"Asian_dollarbird.jpg","mp3":"Asian_dollarbird.mp3","ecosystem":"tree","iucn":"LC"},
	{"latin":"Irena puella","english":"Asian fairy bluebird","img":"Asian_fairy_bluebird.jpg","mp3":"Asian_fairy_bluebird.mp3","ecosystem":"tree","iucn":"LC"},
	{"latin":"Oriolus xanthornus","english":"Black-hooded oriole","img":"Black-hooded_oriole.jpg","mp3":"Black-hooded_oriole.mp3","key":3,"ecosystem":"tree","iucn":"LC"},
	{"latin":"Dinopium benghalense","english":"Black-rumped flameback","img":"Black-rumped_flameback.jpg","mp3":"Black-rumped_flameback.mp3","key":4,"ecosystem":"tree","iucn":"LC"},
	{"latin":"Amauornis bicolour","english":"Black-tailed crake","img":"Black-tailed_crake.jpg","mp3":"Black-tailed_crake.mp3","key":5,"ecosystem":"wetland","iucn":"LC"},
	{"latin":"Limosa limosa","english":"Black-tailed godwit","img":"Black-tailed_godwit.jpg","ecosystem":"wetland","iucn":"NT"},
	{"latin":"Megalaima asiatica","english":"Blue-throated barbet","img":"Blue-throated_barbet.jpg","mp3":"Blue-throated_barbet.mp3","key":6,"ecosystem":"tree","iucn":"LC"},
	{"latin":"Cissa chinensis","english":"Common green magpie","img":"Common_green_magpie.jpg","mp3":"Common_green_magpie.mp3","key":7,"ecosystem":"ground","iucn":"LC"},
	{"latin":"Arborophila torqueola","english":"Common hill partridge","img":"Common_hill_partridge.jpg","mp3":"Common_hill_partridge.mp3","ecosystem":"ground","iucn":"LC"},
	{"latin":"Alcedo althis","english":"Common kingfisher","img":"Common_kingfisher.jpg","mp3":"Common_kingfisher.mp3","key":8,"ecosystem":"wetland","iucn":"LC"},
	{"latin":"Mergus merganser","english":"Common merganser","img":"Common_merganser.jpg","mp3":"Common_merganser.mp3","key":9,"ecosystem":"wetland","iucn":"LC"},
	{"latin":"Ceryle lugubris","english":"Crested kingfisher","img":"Crested_kingfisher.jpg","mp3":"Crested_kingfisher.mp3","key":0,"ecosystem":"wetland","iucn":"LC"},
	{"latin":"Spilornis cheela","english":"Crested serpent eagle","img":"Crested_serpent_eagle.jpg","mp3":"Crested_serpent_eagle.mp3","key":"-","ecosystem":"sky","iucn":"LC"},
	{"latin":"Surniculus lugubris","english":"Cuckoo drongo","img":"Cuckoo_drongo.jpg","mp3":"Cuckoo_drongo.mp3","key":"q","ecosystem":"tree","iucn":"LC"},
	{"latin":"Phalacrocorax carbo","english":"Great cormorant","img":"Great_cormorant.jpg","mp3":"Great_cormorant.mp3","key":"w","ecosystem":"wetland","iucn":"LC"},
	{"latin":"Buceros bicornis","english":"Great hornbill","img":"Great_hornbill.jpg","mp3":"Great_hornbill.mp3","ecosystem":"tree","iucn":"NT"},
	{"latin":"Mulleripicus pulverulentus","english":"Great slaty woodpecker","img":"Great_slaty_woodpecker.jpg","mp3":"Great_slaty_woodpecker.mp3","key":"e","ecosystem":"tree","iucn":"VU"},
	{"latin":"Polyplectron bicalcaratum","english":"Grey peacock-pheasant","img":"Grey_peacock-pheasant.jpg","mp3":"Grey_peacock-pheasant.mp3","key":"r","ecosystem":"ground","iucn":"LC"},
	{"latin":"Motacilla cinerea","english":"Grey wagtail","img":"Grey_wagtail.jpg","mp3":"Grey_wagtail.mp3","key":"t","ecosystem":"wetland","iucn":"LC"},
	{"latin":"Pycnonotus leucogenys","english":"Himalayan bulbul","img":"Himalayan_bulbul.jpg","mp3":"Himalayan_bulbul.mp3","key":"y","ecosystem":"tree","iucn":"LC"},
	{"latin":"Ibidorhyncha struthersii","english":"Ibisbill","img":"Ibisbill.jpg","mp3":"Ibisbill.mp3","key":"u","ecosystem":"wetland","iucn":"LC"},
	{"latin":"Lophura leucomelana lathami","english":"Kalij pheasant","img":"Kalij_pheasant.jpg","mp3":"Kalij_pheasant.mp3","key":"i","ecosystem":"ground","iucn":"LC"},
	{"latin":"Leptoptilos javanicus","english":"Lesser adjutant","img":"Lesser_adjutant.jpg","mp3":"Lesser_adjutant.mp3","key":"o","ecosystem":"wetland","iucn":"VU"},
	{"latin":"Pericrocotus ethologus","english":"Long-tailed minivet","img":"Long-tailed_minivet.jpg","mp3":"Long-tailed_minivet.mp3","key":"p","ecosystem":"tree","iucn":"LC"},
	{"latin":"Gracula religiosa","english":"Myna hill","img":"Myna_hill.jpg","mp3":"Myna_hill.mp3","key":"a","ecosystem":"tree","iucn":"LC"},
	{"latin":"Anhinga melanogaster","english":"Oriental darter","img":"Oriental_darter.jpg","mp3":"Oriental_darter.mp3","key":"s","ecosystem":"wetland","iucn":"NT"},
	{"latin":"Anthracoceros albirostris","english":"Oriental pied hornbill","img":"Oriental_pied_hornbill.jpg","mp3":"Oriental_pied_hornbill.mp3","ecosystem":"tree","iucn":"LC"},
	{"latin":"Streptopelia orientalis","english":"Oriental turtle dove","img":"Oriental_turtle_dove.jpg","mp3":"Oriental_turtle_dove.mp3","ecosystem":"ground","iucn":"LC"},
	{"latin":"Haliaeetus leucoryphus","english":"Pallas","img":"Pallas.jpg","mp3":"Pallas.mp3","ecosystem":"sky","iucn":"VU"},
	{"latin":"Ceryle rudis","english":"Pied kingfisher","img":"Pied_kingfisher.jpg","mp3":"Pied_kingfisher.mp3","key":"d","ecosystem":"wetland","iucn":"LC"},
	{"latin":"Rhyacornis fuliginosa","english":"Plumbeous water redstart","img":"Plumbeous_water_redstart.jpg","mp3":"Plumbeous_water_redstart.mp3","key":"f","ecosystem":"wetland","iucn":"LC"},
	{"latin":"Gallus gallus","english":"Red junglefowl","img":"Red_junglefowl.jpg","mp3":"Red_junglefowl.mp3","key":"h","ecosystem":"ground","iucn":"LC"},
	{"latin":"Psittacula alexandri","english":"Red-breasted parakeet","img":"Red-breasted_parakeet.jpg","mp3":"Red-breasted_parakeet.mp3","key":"g","ecosystem":"tree","iucn":"LC"},
	{"latin":"Vanellus indicus","english":"Red-wattled lapwing","img":"Red-wattled_lapwing.jpg","mp3":"Red-wattled_lapwing.mp3","key":"j","ecosystem":"wetland","iucn":"LC"},
	{"latin":"Vanellus duvaucelii","english":"River lapwing","img":"River_lapwing.jpg","mp3":"River_lapwing.mp3","key":"k","ecosystem":"wetland","iucn":"NT"},
	{"latin":"Sterna aurantia","english":"River tern","img":"River_tern.jpg","mp3":"River_tern.mp3","key":"l","ecosystem":"wetland","iucn":"NT"},
	{"latin":"Anthreptes singalensis","english":"Ruby-cheeked sunbird","img":"Ruby-cheeked_sunbird.jpg","mp3":"Ruby-cheeked_sunbird.mp3","key":"z","ecosystem":"tree","iucn":"LC"},
	{"latin":"Aceros nipalensis","english":"Rufous-necked hornbill","img":"Rufous-necked_hornbill.jpg","mp3":"Rufous-necked_hornbill.mp3","ecosystem":"tree?","iucn":"VU"},
	{"latin":"Leiothrix argentauris","english":"Silver-eared mesia","img":"Silver-eared_mesia.jpg","mp3":"Silver-eared_mesia.mp3","ecosystem":"ground","iucn":"LC"},
	{"latin":"Enicurus schistaceus","english":"Slaty-backed forktail","img":"Slaty-backed_forktail.jpg","mp3":"Slaty-backed_forktail.mp3","key":"x","ecosystem":"wetland","iucn":"LC"},
	{"latin":"Dicrurus bracteatus","english":"Spangled drongo","img":"Spangled_drongo.jpg","key":"c","ecosystem":"tree","iucn":"LC"},
	{"latin":"Streptopelia chinensis","english":"Spotted dove","img":"Spotted_dove.jpg","mp3":"Spotted_dove.mp3","key":"v","ecosystem":"ground","iucn":"LC"},
	{"latin":"Arachnothera magna","english":"Streaked spiderhunter","img":"Streaked_spiderhunter.jpg","mp3":"Streaked_spiderhunter.mp3","key":"b","ecosystem":"tree","iucn":"LC"},
	{"latin":"Treron sphenurus","english":"Wedge-tailed green pigeon","img":"Wedge-tailed_green_pigeon.jpg","mp3":"Wedge-tailed_green_pigeon.mp3","key":"n","ecosystem":"tree","iucn":"LC"},
	{"latin":"Garrulax leucolophus","english":"White-crested laughingthrush","img":"White-crested_laughingthrush.jpg","mp3":"White-crested_laughingthrush.mp3","ecosystem":"ground","iucn":"LC"},
	{"latin":"Gyps bengalensis","english":"White-naped vulture","img":"White-naped_vulture.jpg","ecosystem":"sky","iucn":"CR"},
	{"latin":"Halcyon smyrnensis","english":"White-throated kingfisher","img":"White-throated_kingfisher.jpg","mp3":"White-throated_kingfisher.mp3","ecosystem":"wetland","iucn":"LC"},
	{"latin":"Rhyticeros undulatus","english":"Wreathed hornbill","img":"","mp3":"Wreathed_hornbill.mp3","ecosystem":"tree","iucn":"LC"},
	{"latin":"Arborophiila atrogularis","english":"White-cheeked partridge","ecosystem":"ground","iucn":"NT"},
	{"latin":"Threskiornis melanocephalus","english":"Black-headed ibis","mp3":"Black-headed_ibis.mp3","key":2,"ecosystem":"wetland","iucn":"NT"}
]};
</script>
<body class="list">
    <!--[if lt IE 7]>
        <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
    <![endif]-->
	
    <div class="everything-but-footer">
        <header>
            <ul>
                <li><a href="credits.html" title="Credits">Credits</a></li>
                <li><a href="list.html" title="List of Birds">List of Birds</a></li>
                <li><a href="index.html" title="Home">Home</a></li>
            </ul>
        </header>
        <div id="body">
			
			<!-- 2. Anchor -->
            <ul class="bird-list" id="hook"></ul>
			
        </div><!--body-->
    </div><!--everything-but-footer-->
    <footer></footer>
</body>

<!-- 3. Template -->
<script id="tpl"  type="text/x-handlebars-template">
	<li class="{{ecosystem}}">
		{{#if img}}<div class="bird-img" data-name="{{english}}" style="background-image:url('img/photo/{{img}}')">
			{{else}}<div class="bird-img" data-name="{{english}}" style="background-image:url('img/photo/nophoto.jpg')">
		{{/if}}
			{{#if mp3}}<audio src="audio/{{mp3}}" controls></audio>{{/if}}
		</div><!--bird-img-->
		<div class="bird-info">
			<p class="title">{{english}} <span>{{latin}}</span></p>
			<p class="description">{{#if description}}{{description}}{{else}}Os et maxima simus. Ut errum erum lam et haruptas dellore riberumet eliquodis expedio. Ut volessum si re idellant occus nus et pos dusaectiis nesedi tem ut eni isimagnatur? Ta volorempor ant.{{/if}} <a href="http://en.wikipedia.org/wiki/{{latin}}" class="see-more">( see more )</a></p>
			<ol>
				<li>{{#if special}}{{special}}{{else}}Loves to hang around in parties or in pairs{{/if}}</li>
				<li class="iucn"><a href="#" class="{{iucn}}"></a></li>
				<li class="ecosystem"><a href="#" class="{{ecosystem}}"></a></li>
			</ol>
			<div class="clearfix"></div><!--clearfix-->
		</div><!--bird-info-->
		<div class="clearfix"></div>
	</li>
</script>
<!-- 3. Template -->
<script id="tpl-old" type="text/template">
  {{#item}}
	<li class="{{ecosystem}}">
		{{#if img}}<div class="bird-img" data-name="{{english}}" style="background-image:url('img/photo/{{img}}')">
			{{else}}<div class="bird-img" data-name="{{english}}" style="background-image:url('img/photo/nophoto.jpg')">
		{{/if}}
			{{#if mp3}}<audio src="audio/{{mp3}}" controls></audio>{{/if}}
		</div><!--bird-img-->
		<div class="bird-info">
			<p class="title">{{english}} <span>{{latin}}</span></p>
			<p class="description">Os et maxima simus. Ut errum erum lam et haruptas dellore riberumet eliquodis expedio. Ut volessum si re idellant occus nus et pos dusaectiis nesedi tem ut eni isimagnatur? Ta volorempor ant. <a href="http://en.wikipedia.org/wiki/{{latin}}" class="see-more">( see more )</a></p>
			<ol>
				<li>Loves to hang around in parties or in pairs</li>
				<li class="iucn"><a href="#" class="{{iucn}}"></a></li>
				<li class="ecosystem"><a href="#" class="{{ecosystem}}"></a></li>
			</ol>
			<div class="clearfix"></div><!--clearfix-->
		</div><!--bird-info-->
		<div class="clearfix"></div>
	</li>
{{/item}}
</script>

<!-- ###################### -->
<!-- ### INTERACTIVE JS ### -->
<!-- ###################### -->

<!--4. Handlebars.js slingshot -->

<script>
/*	//4a.function creation
	var slingshot = function (data, tplId, anchor) {
		//$.getJSON(url, function(data) {
		var template = $(tplId).html();
		var stone = Handlebars.compile(template)(data);
		$(anchor).append(stone);
		// });
	}
	//4b.function firing
	slingshot(jsonData, '#tpl', '#hook'); // since url = 'data.json' , we can use both notations. */
</script>

<!--5a. INTERACTIONS -->
<script type="text/javascript">
	//  var public_spreadsheet_url = 'https://docs.google.com/spreadsheet/pub?hl=en_US&hl=en_US&key=0Arsc5NsNo7xedERucjY3aHdvMkdzdmV2aUE2d2dpN2c&output=html';
$(document).ready( function() {
	Tabletop.init( 
		{ key: '0Arsc5NsNo7xedFFzc3ZQWUVZRkR0WmJub2pqLU1Cc1E',
			callback: showInfo,
			parseNumbers: true } 
	);
});

function showInfo(data, tabletop) { // function showInfo(rows) { } important as well !
	var source   = $("#tpl").html();
	var template = Handlebars.compile(source);
		$.each( tabletop.sheets("app1").all(), function(i, data2) {
		var html = template(data2);
		$("#hook").append(html);
	});

	var playSound = function ($this) {
		console.log("♪: fired !");// edited
		// get phonetic properties
		var pho = $this.attr("data-name").replace(/ /g, "_"); // name of the bird and mp3 file.
		var key = $this.attr("data-key"); // associated keyboard touch.
		$this.addClass("playing");
		// playing
		var sound = new Howl({
			urls: ['./audio/'+pho+'.mp3'],
			onend: function() { $this.removeClass("playing"); }
		}).play();
		console.log("♪: "+pho+".");// edited
	}; // end

	$(".bird-img").click(function(){ 
		playSound( $(this) );
	});	
}




/*  $("#input").on("keyup", function () {
    var input = $("#input").val().slice(-1);
    playSound( $(".bird[data-key="+input+"]") );
    $("#input").val(""); // clean up field!
  }); */
</script>
</html>